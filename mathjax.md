# MathJax

Some details and links about MathJax and its configuration.  I have made the decision to target MathJax v3: this is an ongoing endeavour, and v3 is the future; in a few years, it will be the standard, and probably my workflow will not have changed much.

MathJax is by now mature technology, and for rendering mathematics on a website, it produces (in my opinion) beautiful results.  So here I want to concentrate on support for screen readers.  I have never before used a screen reader, so this is all rather making it up as I go along.

(Also, it must be said that I do not _currently_ teach any students who, to my knowledge, use a screen-reader.  Obviously we should prepare for this eventually, rather than be rushing around trying to make things work should a student one day turn up needing to use this technology.  But it can feel a little like shooting in the dark: what if I end up testing with a tool no-one actually really uses?)


### Performance

This is just my personal experience.  MathJax can be a bit slow, even on a modern desktop.  In MathML mode (that is, rendering MathML, not LaTeX commands) it seems to stall out more obviously, making the web-page non-response for a few seconds.  Turning on the accessibility tools makes this noticeably worse.

On my very old Surface Pro laptop, the performance is dismal, to the point of making a long document almost unusable.


## What we should actually expect

At this point, I spent some time researching what exactly a screen reader is _meant_ to do.  The results are... disappointing.

- [NVDA with MathJax demo](https://www.youtube.com/watch?v=mTFWb18fpaM) : youtube video
- [MathJax demo](https://www.youtube.com/watch?v=6GSgTjorewQ&feature=youtu.be) : youtube video of different systems
- [MathJax v3 overview](https://progressiveaccess.com/ahg19/ahg19.html) : Conference talk text

Having installed [NVDA](https://www.nvaccess.org/) I can, _sort of_, reproduce these.  (My lack of success is probably down to my lack of skill with NVDA).  Some interpretation:

- We don't really expect the maths to be readout "inline", as part of the text.  This of course is a big problem for the way advanced mathematics, especially pure mathematics, is written.
- Everything seems rather geared to _highschool level Mathematics_.  The [eBook test document](http://epubtest.org/test-books#math) for mathematics contains merely a fraction and some indeterminates.


## Testing with ChromeVox

This is a screen reader which appears in the MathJax docs, and context menus.  You can install it for Chrome from the webstore: [ChromeVox](https://chrome.google.com/webstore/detail/chromevox-classic-extensi/kgejglhpjiefppelpmljglcjbhoiplfn).  That said, I note ominously that the download page says

> Please note that this extension is now in maintenance mode; no new additions will be made moving forward.

It seems that the tool is being transitioned to an OS level tool inside ChromeOS.  Maybe I need to test on my chromebook.

Testing with MathJax v2:
- It doesn't read any maths initially in my [simple example](https://matthewdaws.github.io/AccessibleLaTeX/make4ht%20project%201/main.htm).
- If I use the context menu -> Accessibility -> Explorer -> Active then it will read simple inline maths, but the integral is narrated as "Collapsed separator ..."

Testing with MathJax v3:
- It doesn't read any maths initially in my [simple example](https://matthewdaws.github.io/AccessibleLaTeX/mathjax%203%20simple/main.htm).
- If I use the context menu -> Accessibility -> Active then it now reads pretty well.
- This [StackOverflow question](https://stackoverflow.com/questions/60688026/how-to-activate-mathjax-accessibility-by-default) suggests that it's not possible to active the accessibility tools by default!  However, the setting does seem to persist, I think at the "web page" level.

The accessibility tools in version 3 seem to be slightly buggy still.  I managed to find a breaking case, and filled a bug report on GitHub.  The [MathML example](https://matthewdaws.github.io/AccessibleLaTeX/make4ht%20project%203/main.html) generated by `make4ht` renders fine normally, but if you turn on the accessibility tools and scroll to the end of the screen, is displays a large number of errors (latest versions of Firefox or Chrome).  (It is possible this is related to the build problems I saw from `make4ht`).


## Documentation

- [Configuration](http://docs.mathjax.org/en/latest/web/configuration.html#web-configuration)
